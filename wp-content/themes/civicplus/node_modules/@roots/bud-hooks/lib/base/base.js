var _a;
import { __decorate, __metadata } from "tslib";
import { bind } from '@roots/bud-support/decorators/bind';
import { BudError } from '@roots/bud-support/errors';
import isUndefined from '@roots/bud-support/lodash/isUndefined';
/**
 * Synchronous hooks registry
 *
 * @remarks
 * Supports sync values
 */
export class Hooks {
    _app;
    /**
     * Hooks store
     */
    store;
    /**
     * Class constructor
     */
    constructor(_app) {
        this._app = _app;
        this.store = {};
    }
    /**
     * Get app
     */
    get app() {
        return this._app();
    }
    catch(e, id, iteration) {
        throw new BudError(`problem running hook ${id}`, { cause: e });
    }
    /**
     * Check if a hook has been set somewhere
     */
    has(path) {
        return isUndefined(this.store[path]) === false;
    }
}
__decorate([
    bind,
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Error, String, Number]),
    __metadata("design:returntype", void 0)
], Hooks.prototype, "catch", null);
__decorate([
    bind,
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [typeof (_a = typeof T !== "undefined" && T) === "function" ? _a : Object]),
    __metadata("design:returntype", Boolean)
], Hooks.prototype, "has", null);
