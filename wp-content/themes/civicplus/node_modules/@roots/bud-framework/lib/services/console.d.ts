import type { Bud } from '../index.js';
import { Service } from '../service.js';
/**
 * Received messages
 */
type MessagesCache = Array<{
    message: string;
    stream: `stderr` | `stdout`;
}>;
/**
 * ConsoleBuffer {@link Service}
 *
 * @remarks
 * Intercepts console function calls and emits them using the bud logger.
 * Deduplicates and trims console output.
 */
export default class ConsoleBuffer extends Service {
    /**
     * Received messages
     */
    queue: MessagesCache;
    /**
     * Restore console function
     *
     * @remarks
     * Returned from {@link patchConsole} call. This is called to restore
     * the normal {@link console} behavior.
     */
    restore?: () => any;
    /**
     * Already processed messages
     */
    stack: MessagesCache;
    /**
     * Fetch and remove
     *
     * @remarks
     * Transfers messages from {@link ConsoleBuffer.queue} to {@link ConsoleBuffer.stack}
     */
    fetchAndRemove(): {
        message: string;
        stream: "stderr" | "stdout";
    }[];
    /**
     * {@link Service.register}
     */
    register(bud: Bud): Promise<void>;
}
export {};
