import { __decorate, __metadata } from "tslib";
import { default as InterpolateHtmlWebpackPlugin, } from '@roots/bud-extensions/interpolate-html-webpack-plugin/plugin';
import { DynamicOption, Extension } from '@roots/bud-framework/extension';
import { bind, disabled, label, options, } from '@roots/bud-framework/extension/decorators';
/**
 * Interpolate html webpack plugin configuration
 */
let BudInterpolateHtmlExtension = class BudInterpolateHtmlExtension extends Extension {
    /**
     * {@link Extension.make}
     */
    async make(bud) {
        const InterpolateHtmlWebpackPlugin = await bud.module.import(`@roots/bud-extensions/interpolate-html-webpack-plugin/plugin`, import.meta.url);
        const { getHooks } = await bud.module.import(`@roots/bud-support/html-webpack-plugin`, import.meta.url);
        return new InterpolateHtmlWebpackPlugin(getHooks, {
            ...(this.options ?? {}),
            ...(bud.extensions.get(`@roots/bud-extensions/webpack-define-plugin`)
                ?.options ?? {}),
            ...(bud.env.getPublicEnv() ?? {}),
        });
    }
};
__decorate([
    bind,
    __metadata("design:type", Function),
    __metadata("design:paramtypes", [Function]),
    __metadata("design:returntype", Promise)
], BudInterpolateHtmlExtension.prototype, "make", null);
BudInterpolateHtmlExtension = __decorate([
    label(`@roots/bud-extensions/interpolate-html-webpack-plugin`),
    options({
        APP_TITLE: DynamicOption.make(app => app.label),
        NO_SCRIPT: `You need to enable JavaScript to run this app`,
    }),
    disabled
], BudInterpolateHtmlExtension);
export { BudInterpolateHtmlExtension as default };
